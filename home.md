Sanger Biocluster
======================

>              
>                
> *Welcome to a Sanger !*
>              
>              

桑格开发工作流
---------------
![开发流程图](img/Sanger-workflow.png)


# 规范文档

### 集群使用

* 开发环境

	登录节点： `192.168.12.102` 用户：`sanger-dev`，用户目录使用`~/sg-users`中个人目录,非个人目录中不要随意存放文件或删除文件

* 软件安装

	安装主目录目录：`/mnt/ilustre/users/sanger-dev/app/`
	- `bioinfo/` 分析软件安装目录，其中通用型软件按功能类别安装在各个目录中，其他按产品类型安装在各自目录中，安装文件夹以'软件名-版本号'命名
	- `database/`	存放分析计算过程中软件需调用的生信数据库文件
	- `gcc/` 各版本gcc编译器
	- `install_packages/` 软件包安装目录
	- `library/`  安装软件时需要的linux库
	- `program/`	基础软件，编程语言等
	安装需记录下安装信息，在[AppInstall](AppInstallList)中添加记录。


* 调试代码

	编写的代码进行调试时将修改的脚本拷到 `~/biocluster`中相应位置，禁止整个文件夹复制，避免开发人员之间代码覆盖，互相影响。
	`~/workspace` 为测试运行数据结果目录。


### 开发编程

* Git & gitlab
	- 代码开发统一使用git库进行代码编写和提交;
	- 登录[gitlba平台 git.majorbio.com](git.majorbio.com) 进行协作开发，受保护分支需进行merge request代码审核。


* 代码规范
	- 代码编写需进行[Pep8](https://www.python.org/dev/peps/pep-0008/)检查，可以使用文本编辑器插件自动检查;
	- 注释信息简洁明晰;


### 流程解析
*	解析报告PPT要求：

	包含要点：分析功能、分析方法、软件命令、输入输出、文件内容和格式、命令参数、运行逻辑、运行测试情况（稳定性和资源耗用）。


### 产品设计

* 流程产品设计

	流程的一次分析包括：基础分析、交互分析、静态报告、结果目录。

	- 基础分析

	将分析过程设置为3-5个步骤，选定步骤中必须要设置的参数和选择设置的参数，参数关系避免过于复杂，参数在后台管理系统配置好后自动生成页面，但不包含参数关系，页面原型中需备注清楚参数关系。该部分分析一次性提交运行完成。

	- 交互分析

	交互分析页面主要包括：左侧分析目录，确认好目录层级；中间主要分析版面，包括半部分的参数设置区、下半部分结果区；右侧有结果记录弹出层。

	- 静态报告

	静态报告主要用于最终结果打印，可参考产品线结题报告。

	- 结果目录

	结果目录需确认分析类别文件夹名称和需要发送给客户的结果文件列表。

* 工具产品设计

	工具的一次分析包括：任务参数和结果页、结果目录。



* 模块设计
	- 单模块说明文档

	包含要点：模块路径Path、程序安装、功能描述、参数设计、运行逻辑
	参考示例：[blast Tool](examples/tool_info.md)

	- workflow流程图

	包含要点：模块间上下游关系连接、module与tool之间的包含、File模块列表以及模块上file编号标注、模块开发者名字缩写标注、接口列表。
	建议使用[ProcessOn在线协作流程工具](https://www.processon.com)制作(加入`Sanger流程协作`小组)


### 模块开发

### 接口编写

### 测试发布
	相关负责人员：蓝英、王兆月，（注：协助测试员: 周玄、周茉莉、韩畅、曾静、宣红东，每次测试人员由蓝英按情况安排）
* Step 1 ：sg本地开发机

	相关开发人员自测试：网页端+生信端（蓝英确认并记录，没有自测不予通过）
* Step 2 ：tsg测试机

	页面测试：蓝英、王兆月（+协助测试员）
	生信测试：蓝英、石今（+协助测试员）
	尽可能在这一步解决大多数测试问题

* Step 3 ：tsanger预发布机

	确认推送内容项，安排网页端和生信端代码更新到tsanger，内部测试后通知产品线测试（蓝英+协助测试员+产品线测试人员）

* Step 4 ：sanger内部正式机

	测试完成安排网页端和生信端代码更新；
	蓝英线上测试检查；

* Step 5 ：i-sanger外部正式机

	推送外网更新。

	**Sanger平台更新规范**
		1. 普通功能需求按类型整理后2-3周更新一次；
		2. 问题bug和重要紧急的功能需求按实际情况及时更新推送；
		3. 大的改动功能需求和新增分析项按计划时间更新（与产品部确认推送时间），提前3-5天通知产品线预发布机测试，提前1天通知相关部门（产品线、营销部）更新内容；
		4. 重大变更更新推送时间安排在下班后1-2小时内完成，提前通知相关人员准备更新，更新前一天在平台上发提示更新的公告，告知用户将要更新维护的时间和内容；
		5. 每1-2周在平台发布更新内容公告。



# 基础技能

* 集群系统

* Linux

* Slurm

* Git

* Python

* Axure

* Mongo

* MySQL


# 开发工具

* 代码提交
	- GIT
	- Sourcetree
	- TortoiseGit

* 代码编写
	- pycharm
	- sublime text
	- atom

* 集群使用
	- xmanage

* 原型制作
	- Axure

* 数据库
	- mongo:rockmongo
	- mysql:navicat


# 框架学习


# 生信模块


# 可视化模板
